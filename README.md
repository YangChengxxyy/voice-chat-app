# VoiceChat Mini - å®æ—¶è¯­éŸ³èŠå¤©ç³»ç»Ÿ

åŸºäº Next.js + WebRTC + Socket.io æ„å»ºçš„4äººè¯­éŸ³èŠå¤©åº”ç”¨ã€‚

## âœ¨ ç‰¹æ€§

- ğŸ™ï¸ **å®æ—¶è¯­éŸ³é€šè¯** - WebRTCæŠ€æœ¯ï¼Œæ”¯æŒå›å£°æ¶ˆé™¤
- ğŸ‘¥ **å¤šäººåŒæ—¶åœ¨çº¿** - æœ€å¤š4äººåŒæ—¶è¯­éŸ³èŠå¤©
- ğŸš€ **å³æ—¶è¿æ¥** - æ— éœ€æ³¨å†Œï¼Œå¿«é€Ÿåˆ›å»ºæˆ–åŠ å…¥æˆ¿é—´
- ğŸ“± **å“åº”å¼è®¾è®¡** - æ”¯æŒæ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯
- âŒ¨ï¸ **å¿«æ·é”®æ”¯æŒ** - ç©ºæ ¼é”®åˆ‡æ¢é™éŸ³

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **Next.js 14** - Reactæ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨
- **Socket.io** - å®æ—¶é€šä¿¡
- **WebRTC** - éŸ³é¢‘ä¼ è¾“
- **Tailwind CSS** - æ ·å¼æ¡†æ¶

## ğŸ“‹ ç³»ç»Ÿè¦æ±‚

- Node.js 18+
- ç°ä»£æµè§ˆå™¨
- éº¦å…‹é£æƒé™

## ğŸš€ å¿«é€Ÿå¼€å§‹

### æ–¹æ³•1: Docker éƒ¨ç½²ï¼ˆæ¨èï¼‰

**æ£€æŸ¥ Docker Compose ç‰ˆæœ¬å…¼å®¹æ€§:**
```bash
./check-docker.sh
```

**é€šç”¨éƒ¨ç½²è„šæœ¬ï¼ˆè‡ªåŠ¨é€‚é… docker compose ç‰ˆæœ¬ï¼‰:**
```bash
./universal-deploy.sh
```

**ä¼ ç»Ÿéƒ¨ç½²è„šæœ¬:**
```bash
./deploy.sh
```

**åœæ­¢æœåŠ¡:**
```bash
./stop.sh
```

**æ¸…ç†é‡æ–°éƒ¨ç½²:**
```bash
./universal-deploy.sh --clean
```

è®¿é—®åº”ç”¨ï¼šhttp://localhost:3000

**æ³¨æ„**: æ–°ç‰ˆæœ¬ Docker ä½¿ç”¨ `docker compose`ï¼Œæ—§ç‰ˆæœ¬ä½¿ç”¨ `docker-compose`ã€‚è„šæœ¬ä¼šè‡ªåŠ¨æ£€æµ‹å¹¶é€‚é…ã€‚

### æ–¹æ³•2: ä¸€é”®å¯åŠ¨

**Linux/macOS:**
```bash
./start.sh
```

**Windows:**
```bash
start.bat
```

### æ–¹æ³•3: æ‰‹åŠ¨å¯åŠ¨

1. å®‰è£…ä¾èµ–ï¼š
```bash
npm install
```

2. å¯åŠ¨Socket.ioæœåŠ¡å™¨ï¼š
```bash
npm run server
```

3. å¯åŠ¨Next.jsæœåŠ¡å™¨ï¼š
```bash
npm run dev
```

4. è®¿é—®åº”ç”¨ï¼šhttp://localhost:3000

### æµ‹è¯•è¿æ¥

è®¿é—®æµ‹è¯•é¡µé¢æ£€æŸ¥Socket.ioè¿æ¥çŠ¶æ€ï¼š
http://localhost:3000/test

## ğŸ³ Docker éƒ¨ç½²

### ç³»ç»Ÿè¦æ±‚

- Docker Desktop æˆ– Docker Engine
- Docker Compose (æ–°ç‰ˆæœ¬ä½¿ç”¨ `docker compose`ï¼Œæ—§ç‰ˆæœ¬ä½¿ç”¨ `docker-compose`)
- ä»£ç†é…ç½®ï¼ˆå¦‚æœåœ¨å›½å†…ç½‘ç»œç¯å¢ƒï¼‰

### Docker Compose ç‰ˆæœ¬å…¼å®¹æ€§

æœ¬é¡¹ç›®æ”¯æŒä¸¤ç§ Docker Compose å‘½ä»¤ï¼š

| ç‰ˆæœ¬ç±»å‹ | å‘½ä»¤ | è¯´æ˜ |
|---------|------|------|
| **æ–°ç‰ˆæœ¬** | `docker compose` | Docker Desktop å†…ç½®ï¼Œæ¨èä½¿ç”¨ |
| **æ—§ç‰ˆæœ¬** | `docker-compose` | ç‹¬ç«‹å®‰è£…çš„å·¥å…· |

**è‡ªåŠ¨æ£€æµ‹å‘½ä»¤:**
```bash
./check-docker.sh
```

### éƒ¨ç½²æ–¹å¼

#### æ–¹å¼1: é€šç”¨éƒ¨ç½²ï¼ˆæ¨èï¼‰
è‡ªåŠ¨æ£€æµ‹ Docker Compose ç‰ˆæœ¬å¹¶éƒ¨ç½²ï¼š
```bash
# æ ‡å‡†éƒ¨ç½²
./universal-deploy.sh

# æ¸…ç†åéƒ¨ç½²
./universal-deploy.sh --clean

# ä¸ä½¿ç”¨ä»£ç†éƒ¨ç½²
./universal-deploy.sh --no-proxy
```

#### æ–¹å¼2: ä¼ ç»Ÿéƒ¨ç½²
ä½¿ç”¨é¢„é…ç½®çš„éƒ¨ç½²è„šæœ¬ï¼š
```bash
./deploy.sh
```

#### æ–¹å¼3: æ‰‹åŠ¨éƒ¨ç½²
æ ¹æ®æ‚¨çš„ Docker Compose ç‰ˆæœ¬é€‰æ‹©å‘½ä»¤ï¼š

**æ–°ç‰ˆæœ¬ Docker (docker compose):**
```bash
docker compose build
docker compose up -d
```

**æ—§ç‰ˆæœ¬ Docker (docker-compose):**
```bash
docker-compose build
docker-compose up -d
```

### ç®¡ç†å‘½ä»¤

**åœæ­¢æœåŠ¡:**
```bash
./stop.sh
```

**æŸ¥çœ‹çŠ¶æ€:**
```bash
# è‡ªåŠ¨é€‚é…ç‰ˆæœ¬
./universal-deploy.sh --help

# æˆ–æ‰‹åŠ¨ä½¿ç”¨å¯¹åº”å‘½ä»¤
docker compose ps    # æ–°ç‰ˆæœ¬
docker-compose ps    # æ—§ç‰ˆæœ¬
```

**æŸ¥çœ‹æ—¥å¿—:**
```bash
docker compose logs -f    # æ–°ç‰ˆæœ¬
docker-compose logs -f    # æ—§ç‰ˆæœ¬
```

### æœåŠ¡ä¿¡æ¯

- **Web åº”ç”¨ç«¯å£**: 3000
- **Socket.io æœåŠ¡ç«¯å£**: 3001
- **å¥åº·æ£€æŸ¥**: http://localhost:3001/health

### æ•…éšœæ’é™¤

**å¦‚æœé‡åˆ° "docker-compose: command not found" é”™è¯¯:**
1. æ£€æŸ¥æ‚¨ä½¿ç”¨çš„æ˜¯æ–°ç‰ˆæœ¬ Dockerï¼Œåº”è¯¥ä½¿ç”¨ `docker compose`
2. æˆ–å®‰è£…ç‹¬ç«‹çš„ `docker-compose` å·¥å…·
3. ä½¿ç”¨ `./check-docker.sh` æ£€æµ‹å½“å‰ç¯å¢ƒ
4. ä½¿ç”¨ `./universal-deploy.sh` è‡ªåŠ¨é€‚é…ç‰ˆæœ¬

## ğŸ® ä½¿ç”¨è¯´æ˜

1. **åˆ›å»ºæˆ¿é—´**: ç‚¹å‡»"åˆ›å»ºæˆ¿é—´"ï¼Œç³»ç»Ÿç”Ÿæˆæˆ¿é—´ID
2. **åŠ å…¥æˆ¿é—´**: è¾“å…¥æˆ¿é—´IDï¼Œè¾“å…¥å§“åï¼Œå…è®¸éº¦å…‹é£æƒé™
3. **éŸ³é¢‘æ§åˆ¶**:
   - é™éŸ³/å–æ¶ˆé™éŸ³: ç‚¹å‡»éº¦å…‹é£æŒ‰é’®æˆ–æŒ‰ç©ºæ ¼é”®
   - è°ƒèŠ‚éŸ³é‡: ä½¿ç”¨éŸ³é‡æ»‘å—
   - ç¦»å¼€æˆ¿é—´: Ctrl + L

## ğŸ› æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

**æ— æ³•è®¿é—®éº¦å…‹é£**
- æ£€æŸ¥æµè§ˆå™¨æƒé™è®¾ç½®

**éŸ³é¢‘è´¨é‡å·®**
- å»ºè®®ä½¿ç”¨è€³æœº
- æ£€æŸ¥ç½‘ç»œè¿æ¥

**Socket.ioè¿æ¥å¤±è´¥**
- ç¡®ä¿æœåŠ¡å™¨æ­£å¸¸è¿è¡Œ
- æ£€æŸ¥ç«¯å£3001æ˜¯å¦è¢«å ç”¨
- è®¿é—®æµ‹è¯•é¡µé¢æ£€æŸ¥è¿æ¥çŠ¶æ€

### æŸ¥çœ‹æ—¥å¿—

```bash
# æœåŠ¡å™¨æ—¥å¿—
tail -f logs/server.log

# å®¢æˆ·ç«¯æ—¥å¿—
tail -f logs/client.log
```

## ğŸ“„ è®¸å¯è¯

MIT License
